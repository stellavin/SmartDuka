!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/material"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-mat-select-search",["exports","@angular/core","@angular/forms","@angular/material","rxjs","rxjs/operators","@angular/common"],t):t(e["ngx-mat-select-search"]={},e.ng.core,e.ng.forms,e.ng.material,e.rxjs,e.Rx.Observable.prototype,e.ng.common)}(this,function(e,n,t,a,i,s,o){"use strict";var r=function(){};r.decorators=[{type:n.Directive,args:[{selector:"[ngxMatSelectSearchClear]"}]}];var l=function(){function e(e,t){this.matSelect=e,this.changeDetectorRef=t,this.placeholderLabel="Suche",this.noEntriesFoundLabel="Keine Optionen gefunden",this.clearSearchInput=!0,this.disableInitialFocus=!1,this.onChange=function(e){},this.onTouched=function(e){},this.overlayClassSet=!1,this.change=new n.EventEmitter,this._onDestroy=new i.Subject}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this,e="mat-select-search-panel";this.matSelect.panelClass?Array.isArray(this.matSelect.panelClass)?this.matSelect.panelClass.push(e):"string"==typeof this.matSelect.panelClass?this.matSelect.panelClass=[this.matSelect.panelClass,e]:"object"==typeof this.matSelect.panelClass&&(this.matSelect.panelClass[e]=!0):this.matSelect.panelClass=e,this.matSelect.openedChange.pipe(s.delay(1),s.takeUntil(this._onDestroy)).subscribe(function(e){e?(t.getWidth(),t.disableInitialFocus||t._focus()):t.clearSearchInput&&t._reset()}),this.matSelect.openedChange.pipe(s.take(1)).pipe(s.takeUntil(this._onDestroy)).subscribe(function(){t._options=t.matSelect.options,t._options.changes.pipe(s.takeUntil(t._onDestroy)).subscribe(function(){var e=t.matSelect._keyManager;e&&t.matSelect.panelOpen&&setTimeout(function(){e.setFirstItemActive(),t.getWidth()},1)})}),this.change.pipe(s.takeUntil(this._onDestroy)).subscribe(function(){t.changeDetectorRef.detectChanges()}),this.initMultipleHandling()},e.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete()},e.prototype.ngAfterViewInit=function(){var e=this;this.setOverlayClass(),this.matSelect.openedChange.pipe(s.take(1),s.takeUntil(this._onDestroy)).subscribe(function(){e.matSelect.options.changes.pipe(s.takeUntil(e._onDestroy)).subscribe(function(){e.changeDetectorRef.markForCheck()})})},e.prototype._handleKeydown=function(e){32===e.keyCode&&e.stopPropagation()},e.prototype.writeValue=function(e){e!==this._value&&(this._value=e,this.change.emit(e))},e.prototype.onInputChange=function(e){e!==this._value&&(this.initMultiSelectedValues(),this._value=e,this.onChange(e),this.change.emit(e))},e.prototype.onBlur=function(e){this.writeValue(e),this.onTouched()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype._focus=function(){if(this.searchSelectInput){var e=this.matSelect.panel.nativeElement,t=e.scrollTop;this.searchSelectInput.nativeElement.focus(),e.scrollTop=t}},e.prototype._reset=function(e){this.searchSelectInput&&(this.searchSelectInput.nativeElement.value="",this.onInputChange(""),e&&this._focus())},e.prototype.setOverlayClass=function(){var n=this;if(!this.overlayClassSet){this.matSelect.overlayDir.attach.pipe(s.takeUntil(this._onDestroy)).subscribe(function(){for(var e,t=n.searchSelectInput.nativeElement;t=t.parentElement;)if(t.classList.contains("cdk-overlay-pane")){e=t;break}e&&e.classList.add("cdk-overlay-pane-select-search")}),this.overlayClassSet=!0}},e.prototype.initMultipleHandling=function(){var e=this;this.matSelect.valueChange.pipe(s.takeUntil(this._onDestroy)).subscribe(function(t){if(e.matSelect.multiple){var n=!1;if(e._value&&e._value.length&&e.previousSelectedValues&&Array.isArray(e.previousSelectedValues)){t&&Array.isArray(t)||(t=[]);var a=e.matSelect.options.map(function(e){return e.value});e.previousSelectedValues.forEach(function(e){-1===t.indexOf(e)&&-1===a.indexOf(e)&&(t.push(e),n=!0)})}n&&e.matSelect._onChange(t),e.previousSelectedValues=t}})},e.prototype.getWidth=function(){if(this.innerSelectSearch&&this.innerSelectSearch.nativeElement){for(var e,t=this.innerSelectSearch.nativeElement;t=t.parentElement;)if(t.classList.contains("mat-select-panel")){e=t;break}e&&(this.innerSelectSearch.nativeElement.style.width=e.clientWidth+"px")}},e.prototype.initMultiSelectedValues=function(){this.matSelect.multiple&&!this._value&&(this.previousSelectedValues=this.matSelect.options.filter(function(e){return e.selected}).map(function(e){return e.value}))},e}();l.decorators=[{type:n.Component,args:[{selector:"ngx-mat-select-search",template:'\x3c!-- Placeholder to adjust vertical offset of the mat-option elements --\x3e\n<input matInput class="mat-select-search-input mat-select-search-hidden"/>\n\n\x3c!-- Note: the  mat-datepicker-content mat-tab-header are needed to inherit the material theme colors, see PR #22 --\x3e\n<div\n      #innerSelectSearch\n      class="mat-select-search-inner mat-typography mat-datepicker-content mat-tab-header"\n      [ngClass]="{\'mat-select-search-inner-multiple\': matSelect.multiple}">\n  <input matInput\n         class="mat-select-search-input"\n         autocomplete="off"\n         #searchSelectInput\n         (keydown)="_handleKeydown($event)"\n         (input)="onInputChange($event.target.value)"\n         (blur)="onBlur($event.target.value)"\n         [placeholder]="placeholderLabel"\n  />\n  <button mat-button *ngIf="value"\n          mat-icon-button\n          aria-label="Clear"\n          (click)="_reset(true)"\n          class="mat-select-search-clear">\n    <ng-content *ngIf="clearIcon; else defaultIcon" select="[ngxMatSelectSearchClear]"></ng-content>\n    <ng-template #defaultIcon>\n      <mat-icon>close</mat-icon>\n    </ng-template>\n  </button>\n</div>\n\n<div *ngIf="noEntriesFoundLabel && value && _options?.length === 0"\n     class="mat-select-search-no-entries-found">\n  {{noEntriesFoundLabel}}\n</div>\n\x3c!--\nCopyright (c) 2018 Bithost GmbH All Rights Reserved.\n\nUse of this source code is governed by an MIT-style license that can be\nfound in the LICENSE file at https://angular.io/license\n--\x3e\n',styles:[".mat-select-search-hidden{visibility:hidden}.mat-select-search-inner{position:absolute;top:0;width:100%;border-bottom-width:1px;border-bottom-style:solid;z-index:100;font-size:inherit;-webkit-box-shadow:none;box-shadow:none;border-radius:0}.mat-select-search-inner.mat-select-search-inner-multiple{width:100%}/deep/ .mat-select-search-panel{-webkit-transform:none!important;transform:none!important;overflow-x:hidden}.mat-select-search-input{padding:16px 36px 16px 16px;-webkit-box-sizing:border-box;box-sizing:border-box}.mat-select-search-no-entries-found{padding:16px}.mat-select-search-clear{position:absolute;right:4px;top:5px}/deep/ .cdk-overlay-pane-select-search{margin-top:-50px}"],providers:[{provide:t.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return l}),multi:!0}],changeDetection:n.ChangeDetectionStrategy.OnPush}]}],l.ctorParameters=function(){return[{type:a.MatSelect,decorators:[{type:n.Inject,args:[a.MatSelect]}]},{type:n.ChangeDetectorRef}]},l.propDecorators={placeholderLabel:[{type:n.Input}],noEntriesFoundLabel:[{type:n.Input}],clearSearchInput:[{type:n.Input}],disableInitialFocus:[{type:n.Input}],searchSelectInput:[{type:n.ViewChild,args:["searchSelectInput",{read:n.ElementRef}]}],innerSelectSearch:[{type:n.ViewChild,args:["innerSelectSearch",{read:n.ElementRef}]}],clearIcon:[{type:n.ContentChild,args:[r]}]};var c=function(){};c.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule,a.MatButtonModule,a.MatIconModule,a.MatInputModule],declarations:[l,r],exports:[l,r]}]}],e.MatSelectSearchComponent=l,e.NgxMatSelectSearchModule=c,e.Éµa=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-mat-select-search.umd.min.js.map
